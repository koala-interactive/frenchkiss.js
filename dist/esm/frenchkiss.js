/**
 * @license frenchkiss 0.0.9
 * Copyright (c) 2018-2019 Koala Interactive, Inc.
 * License: MIT
 */
const t=/^\s*\w+\s*$/,e=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,n=JSON.stringify,s=t=>'(p["'+t+'"]||(p["'+t+'"]=="0"?0:"'+t+'" in p?"":v("'+t+'",k,l)))';function l(t){const e={},l=function t(e,l){const o=[];const r=e.length;for(let c=0;c<r;++c){const r=e[c],i=r[0],f=r[1];let u="";if(0===i&&f)u=n(f);else if(1===i)u=s(f.trim());else if(2===i){const e=r[2],s=r[3],o=r[4],c=s.length;for(let r=0;r<c;++r)o?"="===s[r][0][0]?u+='p["'+e+'"]=='+n(s[r][0].substr(1)):(l[e]=1,u+='m["'+e+'"]=='+n(s[r][0])):u+='p["'+e+'"]=='+n(s[r][0]),u+="?"+t(s[r][1],l)+":";u="("+u+t(f,l)+")"}u&&o.push(u)}return o.join("+")||'""'}(o(t),e),r=Object.keys(e),c=r.length,i=[];for(let t=0;t<c;++t)i[t]=r[t]+':f(p["'+r[t]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(c?",m=f?{"+i+"}:{}":"")+";return "+l)}function o(n){let s=0,l="";const o=n.length,c=[];for(let i=0;i<o;++i){const o=n[i];let f;"{"===o?s++||(f=[0,l]):"}"===o&&(--s||(f=t.test(l)?[1,l]:e.test(l)?r(l):[0,l])),f?(c.push(f),l=""):l+=o}return c.push([0,l]),c}function r(t){const n=t.match(e),s=n[1],l="p"===n[2][0].toLowerCase(),r=o(t.replace(e,"")),c=r.length,i=[];let f=[0,""];for(let t=0;t<c-1;){let e=r[t++][1].trim();const n=o(r[t++][1]);"other"===e?f=n:l&&"="===e[0]?i.unshift([e,n]):i.push([e,n])}return[2,f,s,i,l]}const c={},i={};let f={},u="",p="",a=t=>t,h=()=>"";const g=(t,e)=>c[e]&&c[e][t]||i[e]&&"string"==typeof i[e][t]&&(c[e][t]=l(i[e][t])),b=(t,e,n)=>{let s,l=n||u;return l&&(s=g(t,l))?s(e,f[l],t,l,h):(l=p)&&(s=g(t,l))?s(e,f[l],t,l,h):a(t)},d=t=>{a=t},k=t=>{h=t},m=t=>(t&&(u=t),u),y=t=>(t&&(p=t),p),j=(t,e)=>{c[t]={},i[t]=e},v=(t,e)=>{f[t]=e},w=(t,e)=>{i[t]||(i[t]={}),c[t]||(c[t]={});const n=Object.keys(e),s=n.length;for(let l=0;l<s;++l){const s=n[l];i[t][s]=e[s],delete c[t][s]}},x=t=>{delete c[t],delete i[t]};export default{cache:c,store:i,t:b,onMissingKey:d,onMissingVariable:k,locale:m,fallback:y,set:j,unset:x,extend:w,plural:v};export{c as cache,i as store,b as t,d as onMissingKey,k as onMissingVariable,m as locale,y as fallback,j as set,v as plural,w as extend,x as unset};
