/**
 * @license frenchkiss 0.2.1
 * Copyright (c) 2018-2019 Koala Interactive, Inc.
 * License: MIT
 */
const t=/^\s*\w+\s*$/,e=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,n=JSON.stringify,s=t=>'(p["'+t+'"]||(p["'+t+'"]=="0"?0:"'+t+'" in p?"":v("'+t+'",k,l)))';function o(t){const e={},o=function t(e,o){const l=[];const r=e.length;for(let c=0;c<r;++c){const r=e[c],f=r[0],i=r[1];let u="";if(0===f&&i)u=n(i);else if(1===f)u=s(i.trim());else if(2===f){const e=r[2],s=r[3],l=r[4],c=s.length;for(let r=0;r<c;++r)l?"="===s[r][0][0]?u+='p["'+e+'"]=='+n(s[r][0].substr(1)):(o[e]=1,u+='m["'+e+'"]=='+n(s[r][0])):u+='p["'+e+'"]=='+n(s[r][0]),u+="?"+t(s[r][1],o)+":";u="("+u+t(i,o)+")"}u&&l.push(u)}return l.join("+")||'""'}(l(t),e),r=Object.keys(e),c=r.length,f=[];for(let t=0;t<c;++t)f[t]=r[t]+':f(p["'+r[t]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(c?",m=f?{"+f+"}:{}":"")+";return "+o)}function l(n){let s=0,o="";const l=n.length,c=[];for(let f=0;f<l;++f){const l=n[f];let i;"{"===l?s++||(i=[0,o]):"}"===l&&(--s||(i=t.test(o)?[1,o]:e.test(o)?r(o):[0,o])),i?(c.push(i),o=""):o+=l}return c.push([0,o]),c}function r(t){const n=t.match(e),s=n[1],o="p"===n[2][0].toLowerCase(),r=l(t.replace(e,"")),c=r.length,f=[];let i=[0,""];for(let t=0;t<c-1;){let e=r[t++][1].trim();const n=l(r[t++][1]);"other"===e?i=n:o&&"="===e[0]?f.unshift([e,n]):f.push([e,n])}return[2,i,s,f,o]}const c={},f={};let i={},u="",p="",a=t=>t,h=()=>"";const g=(t,e)=>c[e]&&c[e][t]||f[e]&&"string"==typeof f[e][t]&&(c[e][t]=o(f[e][t])),b=(t,e,n)=>{let s,o=n||u;return o&&(s=g(t,o))?s(e,i[o],t,o,h):(o=p)&&(s=g(t,o))?s(e,i[o],t,o,h):a(t,e,n||u)},y=t=>{a=t},d=t=>{h=t},j=t=>(t&&(u=t),u),k=t=>(t&&(p=t),p),m=(t,e)=>{O(e,e,""),c[t]={},f[t]=e},O=(t,e,n)=>{const s=Object.keys(e),o=s.length;for(let l=0;l<o;++l){const o=s[l],r=n+o;"object"==typeof e[o]?(O(t,e[o],r+"."),delete t[o]):t[r]=e[o]+""}},v=(t,e)=>{i[t]=e},w=(t,e)=>{f[t]||(f[t]={}),c[t]||(c[t]={}),x(f[t],c[t],e,"")},x=(t,e,n,s)=>{const o=Object.keys(n),l=o.length;for(let r=0;r<l;++r){const l=o[r],c=s+l;"object"==typeof n[l]?x(t,e,n[l],c+"."):t[c]!==n[l]&&(delete e[c],t[c]=n[l]+"")}},M=t=>{delete c[t],delete f[t]};export default{cache:c,store:f,t:b,onMissingKey:y,onMissingVariable:d,locale:j,fallback:k,set:m,unset:M,extend:w,plural:v};export{c as cache,f as store,b as t,y as onMissingKey,d as onMissingVariable,j as locale,k as fallback,m as set,v as plural,w as extend,M as unset};
