/**
 * @license frenchkiss 0.2.0
 * Copyright (c) 2018-2019 Koala Interactive, Inc.
 * License: MIT
 */
"use strict";var t=/^\s*\w+\s*$/,n=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,e=JSON.stringify,r=function(t){return'(p["'+t+'"]||(p["'+t+'"]=="0"?0:"'+t+'" in p?"":v("'+t+'",k,l)))'};function o(t){for(var n={},o=function t(n,o){var u=[];var i=n.length;for(var f=0;f<i;++f){var s=n[f],c=s[0],a=s[1],l="";if(0===c&&a)l=e(a);else if(1===c)l=r(a.trim());else if(2===c){for(var v=s[2],p=s[3],h=s[4],g=p.length,b=0;b<g;++b)h?"="===p[b][0][0]?l+='p["'+v+'"]=='+e(p[b][0].substr(1)):(o[v]=1,l+='m["'+v+'"]=='+e(p[b][0])):l+='p["'+v+'"]=='+e(p[b][0]),l+="?"+t(p[b][1],o)+":";l="("+l+t(a,o)+")"}l&&u.push(l)}return u.join("+")||'""'}(u(t),n),i=Object.keys(n),f=i.length,s=[],c=0;c<f;++c)s[c]=i[c]+':f(p["'+i[c]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(f?",m=f?{"+s+"}:{}":"")+";return "+o)}function u(e){for(var r=0,o="",u=e.length,f=[],s=0;s<u;++s){var c=e[s],a=void 0;"{"===c?r++||(a=[0,o]):"}"===c&&(--r||(a=t.test(o)?[1,o]:n.test(o)?i(o):[0,o])),a?(f.push(a),o=""):o+=c}return f.push([0,o]),f}function i(t){for(var e=t.match(n),r=e[1],o="p"===e[2][0].toLowerCase(),i=u(t.replace(n,"")),f=i.length,s=[],c=[0,""],a=0;a<f-1;){var l=i[a++][1].trim(),v=u(i[a++][1]);"other"===l?c=v:o&&"="===l[0]?s.unshift([l,v]):s.push([l,v])}return[2,c,r,s,o]}var f={},s={},c={},a="",l="",v=function(t){return t},p=function(){return""},h=function(t,n){return f[n]&&f[n][t]||s[n]&&"string"==typeof s[n][t]&&(f[n][t]=o(s[n][t]))},g=function t(n,e,r){for(var o=Object.keys(e),u=o.length,i=0;i<u;++i){var f=o[i],s=r+f;"object"==typeof e[f]?(t(n,e[f],s+"."),delete n[f]):n[s]=e[f]+""}},b=function t(n,e,r,o){for(var u=Object.keys(r),i=u.length,f=0;f<i;++f){var s=u[f],c=o+s;"object"==typeof r[s]?t(n,e,r[s],c+"."):n[c]!==r[s]&&(delete e[c],n[c]=r[s]+"")}},y={cache:f,store:s,t:function(t,n,e){var r,o=e||a;return o&&(r=h(t,o))?r(n,c[o],t,o,p):(o=l)&&(r=h(t,o))?r(n,c[o],t,o,p):v(t,n,e||a)},onMissingKey:function(t){v=t},onMissingVariable:function(t){p=t},locale:function(t){return t&&(a=t),a},fallback:function(t){return t&&(l=t),l},set:function(t,n){g(n,n,""),f[t]={},s[t]=n},unset:function(t){delete f[t],delete s[t]},extend:function(t,n){s[t]||(s[t]={}),f[t]||(f[t]={}),b(s[t],f[t],n,"")},plural:function(t,n){c[t]=n}};module.exports=y;
